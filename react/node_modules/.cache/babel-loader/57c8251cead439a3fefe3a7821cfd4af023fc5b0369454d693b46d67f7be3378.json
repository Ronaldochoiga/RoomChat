{"ast":null,"code":"var _jsxFileName = \"/home/ronaldochoiga/test_node_app/react/react_app/src/MessagingPanel.js\";\nimport React, { Component, Fragment } from 'react';\nimport RoomList from './roomlist';\nimport CreateRoom from './createroom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass MessagingPanel extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      rooms: [{\n        id: 1,\n        name: 'Room 1'\n      }, {\n        id: 2,\n        name: 'Room 2'\n      }, {\n        id: 3,\n        name: 'Room 3'\n      }],\n      connection: null,\n      isConnectionEstablished: false,\n      // Track connection establishment\n      currentRoom: '' // Track the currently selected room\n    };\n    this.createRoom = roomName => {\n      const newRoom = {\n        id: this.state.rooms.length + 1,\n        name: roomName\n      };\n      this.setState({\n        rooms: [...this.state.rooms, newRoom]\n      });\n    };\n    this.joinRoom = roomId => {\n      const {\n        connection\n      } = this.state;\n      if (connection && connection.readyState === WebSocket.OPEN) {\n        const data = {\n          type: 'join',\n          roomId: roomId\n        };\n        connection.send(JSON.stringify(data));\n      } else {\n        console.error('WebSocket connection is not available.');\n      }\n    };\n    this.handleRoomSelect = roomId => {\n      const selectedRoom = this.state.rooms.find(room => room.id === roomId);\n      this.setState({\n        currentRoom: selectedRoom ? selectedRoom.name : ''\n      });\n    };\n  }\n  componentDidMount() {\n    const connection = new WebSocket('ws://localhost:8080/');\n    connection.onopen = () => {\n      console.log('WebSocket connection established.');\n      this.setState({\n        connection,\n        isConnectionEstablished: true\n      });\n    };\n    connection.onerror = error => {\n      console.error('WebSocket error:', error);\n    };\n  }\n  componentWillUnmount() {\n    const {\n      connection\n    } = this.state;\n    if (connection && connection.readyState === WebSocket.OPEN) {\n      connection.close();\n    }\n  }\n  render() {\n    const {\n      rooms,\n      connection,\n      isConnectionEstablished,\n      currentRoom\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(RoomList, {\n        rooms: rooms,\n        joinRoom: this.joinRoom,\n        connection: connection,\n        isConnectionEstablished: isConnectionEstablished,\n        handleRoomSelect: this.handleRoomSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CreateRoom, {\n        createRoom: this.createRoom,\n        connection: connection,\n        isConnectionEstablished: isConnectionEstablished\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), currentRoom && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Current Room: \", currentRoom]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default MessagingPanel;","map":{"version":3,"names":["React","Component","Fragment","RoomList","CreateRoom","jsxDEV","_jsxDEV","MessagingPanel","constructor","args","state","rooms","id","name","connection","isConnectionEstablished","currentRoom","createRoom","roomName","newRoom","length","setState","joinRoom","roomId","readyState","WebSocket","OPEN","data","type","send","JSON","stringify","console","error","handleRoomSelect","selectedRoom","find","room","componentDidMount","onopen","log","onerror","componentWillUnmount","close","render","children","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/home/ronaldochoiga/test_node_app/react/react_app/src/MessagingPanel.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport RoomList from './roomlist';\nimport CreateRoom from './createroom';\n\nclass MessagingPanel extends Component {\n  state = {\n    rooms: [\n      { id: 1, name: 'Room 1' },\n      { id: 2, name: 'Room 2' },\n      { id: 3, name: 'Room 3' }\n    ],\n    connection: null,\n    isConnectionEstablished: false, // Track connection establishment\n    currentRoom: '' // Track the currently selected room\n  };\n\n  componentDidMount() {\n    const connection = new WebSocket('ws://localhost:8080/');\n    connection.onopen = () => {\n      console.log('WebSocket connection established.');\n      this.setState({ connection, isConnectionEstablished: true });\n    };\n\n    connection.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n  }\n\n  componentWillUnmount() {\n    const { connection } = this.state;\n    if (connection && connection.readyState === WebSocket.OPEN) {\n      connection.close();\n    }\n  }\n\n  createRoom = (roomName) => {\n    const newRoom = { id: this.state.rooms.length + 1, name: roomName };\n    this.setState({ rooms: [...this.state.rooms, newRoom] });\n  };\n\n  joinRoom = (roomId) => {\n    const { connection } = this.state;\n    if (connection && connection.readyState === WebSocket.OPEN) {\n      const data = { type: 'join', roomId: roomId };\n      connection.send(JSON.stringify(data));\n    } else {\n      console.error('WebSocket connection is not available.');\n    }\n  };\n\n  handleRoomSelect = (roomId) => {\n    const selectedRoom = this.state.rooms.find(room => room.id === roomId);\n    this.setState({ currentRoom: selectedRoom ? selectedRoom.name : '' });\n  };\n\n  render() {\n    const { rooms, connection, isConnectionEstablished, currentRoom } = this.state;\n    return (\n      <Fragment>\n        <RoomList rooms={rooms} joinRoom={this.joinRoom} connection={connection} isConnectionEstablished={isConnectionEstablished} handleRoomSelect={this.handleRoomSelect} />\n        <CreateRoom createRoom={this.createRoom} connection={connection} isConnectionEstablished={isConnectionEstablished} />\n        {currentRoom && <div>Current Room: {currentRoom}</div>}\n      </Fragment>\n    );\n  }\n}\n\nexport default MessagingPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}